---
import ResponsiveGrid from "../layouts/ResponsiveGrid.astro";
import PodcastCard from "./PodcastCard.astro";

interface Props {
  media: any[];
  gridType?: "grid" | "list";
  eagerLoadCount?: number;
}

const { media, gridType = "grid", eagerLoadCount = 8 } = Astro.props;

// Debug: Log the eagerLoadCount to verify it's being received
// console.log('PodcastGrid eagerLoadCount:', eagerLoadCount, 'media length:', media.length);
---

<ResponsiveGrid gridItemMinWidth="600px" gridType={gridType}>
  {
    media.map((media, index) => (
      <PodcastCard
        title={media.data.title}
        poster={media.data.poster}
        duration={media.data.duration}
        slug={media.slug}
        publishedAt={media.data.publishedAt}
        showSlug={media.data.showSlug}
        hasEpisodeImage={media.data.hasEpisodeImage}
        podcastTitle={media.data.podcastTitle}
        image={media.data.image}    
        layoutType="list"
        loading={index < eagerLoadCount ? "eager" : "lazy"}
      />
    ))
  }
</ResponsiveGrid>
