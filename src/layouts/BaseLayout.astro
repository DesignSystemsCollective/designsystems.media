---
import { SITE_DESCRIPTION, SITE_TITLE } from "../consts";
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Sidebar from "../components/Sidebar.astro";
import { SEO } from "astro-seo";

interface Props {
  sidebar?: boolean;
  fullWidth?: boolean;
  seo?: {
    title?: string;
    description?: string;
    image?: string;
    openGraphType?: string;
  };
}

const { sidebar, fullWidth, seo } = Astro.props;
---

<html lang="en" transition:name="root" transition:animate="none">
  <head>
    <SEO
      title={seo?.title ?? SITE_TITLE}
      description={seo?.description ?? SITE_DESCRIPTION}
      openGraph={{
        basic: {
          title: seo?.title ?? SITE_TITLE,
          type: seo?.openGraphType ?? "article",
          image: seo?.image ?? "/favicon.svg",
        },
      }}
      twitter={{
        creator: "@designsysmedia",
      }}
      extend={{
        // extending the default link tags
        link: [{ rel: "icon", href: "/favicon.ico" }],
        // extending the default meta tags
        meta: [
          {
            name: "twitter:image",
            content: seo?.image ?? "/favicon.svg",
          },
          { name: "twitter:title", content: seo?.title ?? SITE_TITLE },
          {
            name: "twitter:description",
            content: seo?.description ?? SITE_DESCRIPTION,
          },
          {
            name: "twitter:card",
            content: "summary_large_image",
          },
        ],
      }}
    />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
  </head>

  <body>
    <Header title={SITE_TITLE} />
    <main class={fullWidth && "full-width"}>
      <section id="site-wrapper" class={sidebar && "with-sidebar"}>
        {sidebar && <Sidebar />}
        <section id="main-page">
          <slot />
        </section>
      </section>
    </main>
    <style>
      main {
        width: 100%;
        max-width: 100%;
        margin: 0;
      }
      @media screen and (min-width: 1024px) {
        .with-sidebar {
          display: grid;
          grid-template-columns: 20ch 1fr;
          gap: 1.5rem;
        }
      }
      .with-sidebar section#main-page {
        width: 100%;
        padding: 0rem;
      }
      @media screen and (min-width: 1024px) {
        .with-sidebar section#main-page {
          overflow: auto;
          height: calc(100dvh - 78px);
          padding: 1.5rem 1.5rem 2rem 0;
        }
      }
      main {
        width: 100%;
        max-width: 1800px;
        margin: auto;
        padding: 0rem;
        z-index: 50;
        position: relative;
      }
      main.full-width {
        max-width: 100%;
      }
      @media screen and (min-width: 1024px) {
        main {
          padding: 0rem 0rem;
        }
      }
    </style>
    <style is:global>
      /* Improve Page speed */
      /* https://css-tricks.com/almanac/properties/c/content-visibility/ */
      img {
        content-visibility: auto;
      }
    </style>
  </body>
</html>
